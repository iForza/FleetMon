# üõ†Ô∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–µ –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–µ FleetMon –Ω–∞ VPS

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ VPS –æ—Ç FleetMon –ø—Ä–æ–µ–∫—Ç–∞ –∏ –µ–≥–æ —á–∏—Å—Ç–æ–π –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ Ubuntu 22.04.

## üì¶ –í–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`vps-cleanup.sh`** - –°–∫—Ä–∏–ø—Ç –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ —Å–∏—Å—Ç–µ–º—ã
2. **`vps-install.sh`** - –°–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
3. **`VPS-RESET-GUIDE.md`** - –î–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï!

**–°–ö–†–ò–ü–¢ –û–ß–ò–°–¢–ö–ò –ü–û–õ–ù–û–°–¢–¨–Æ –£–î–ê–õ–ò–¢ –í–°–ï –î–ê–ù–ù–´–ï FLEETMON:**
- –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- –ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
- –ü—Ä–æ—Ü–µ—Å—Å—ã PM2
- –õ–æ–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–í–°–ï –î–ê–ù–ù–´–ï –ë–£–î–£–¢ –ü–û–¢–ï–†–Ø–ù–´ –ù–ê–í–°–ï–ì–î–ê!**

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPS

```bash
ssh root@–í–ê–®_IP_–ê–î–†–ï–°
```

### –®–∞–≥ 2: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤

```bash
# –°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ VPS
wget https://raw.githubusercontent.com/iForza/FleetMon/main/vps-cleanup.sh
wget https://raw.githubusercontent.com/iForza/FleetMon/main/vps-install.sh

# –ò–ª–∏ –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö:
# scp vps-cleanup.sh root@–í–ê–®_IP:/root/
# scp vps-install.sh root@–í–ê–®_IP:/root/
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```bash
chmod +x vps-cleanup.sh
chmod +x vps-install.sh
```

### –®–∞–≥ 4: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ FleetMon!
sudo ./vps-cleanup.sh
```

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—á–∏—Å—Ç–∫–∏ —Å–∫—Ä–∏–ø—Ç:**
- –ü–æ–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–≤–≤–µ–¥–∏—Ç–µ `YES`)
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã PM2
- –£–¥–∞–ª–∏—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- –£–¥–∞–ª–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
- –£–¥–∞–ª–∏—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è fleetmon
- –û—á–∏—Å—Ç–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
- –£–¥–∞–ª–∏—Ç systemd —Å–µ—Ä–≤–∏—Å—ã
- –û—á–∏—Å—Ç–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –®–∞–≥ 5: –ß–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º FleetMon –Ω–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ
sudo ./vps-install.sh
```

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–∫—Ä–∏–ø—Ç:**
- –û–±–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º—É Ubuntu 22.04
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Node.js 18.x
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç PostgreSQL + TimescaleDB + PostGIS
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç PM2 –∏ Nginx
- –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è fleetmon
- –ö–ª–æ–Ω–∏—Ä—É–µ—Ç –ø—Ä–æ–µ–∫—Ç –∏–∑ GitHub
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–æ–±–µ—Ä–µ—Ç frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
- –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx reverse proxy

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
sudo -u fleetmon pm2 status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
sudo -u fleetmon pm2 logs

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ PostgreSQL
systemctl status postgresql
```

## üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ FleetMon –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å–∞–º:

- **Frontend**: `http://–í–ê–®_IP_–ê–î–†–ï–°/`
- **Backend API**: `http://–í–ê–®_IP_–ê–î–†–ï–°/api/`
- **Backend –ø—Ä—è–º–æ–π**: `http://–í–ê–®_IP_–ê–î–†–ï–°:3000`
- **Frontend –ø—Ä—è–º–æ–π**: `http://–í–ê–®_IP_–ê–î–†–ï–°:3001`

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```
/opt/fleetmon/                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ backend/                      # Node.js backend
‚îú‚îÄ‚îÄ frontend/                     # React frontend
‚îú‚îÄ‚îÄ database/                     # SQL —Å—Ö–µ–º—ã
‚îú‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏ PM2
‚îú‚îÄ‚îÄ .env.production              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è production
‚îî‚îÄ‚îÄ ecosystem.config.js          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2
```

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### PM2 –∫–æ–º–∞–Ω–¥—ã:
```bash
sudo -u fleetmon pm2 status       # –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo -u fleetmon pm2 logs         # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo -u fleetmon pm2 restart all  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo -u fleetmon pm2 stop all     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sudo -u fleetmon pm2 start all    # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```

### Nginx –∫–æ–º–∞–Ω–¥—ã:
```bash
systemctl status nginx            # –°—Ç–∞—Ç—É—Å Nginx
systemctl restart nginx           # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
nginx -t                          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### PostgreSQL –∫–æ–º–∞–Ω–¥—ã:
```bash
systemctl status postgresql       # –°—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres psql -d fleetmon # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ
```

## üîß –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1. **`.env.production`** - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. **`ecosystem.config.js`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2
3. **`/etc/nginx/sites-available/fleetmon`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π JWT secret
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

## üìù –õ–æ–≥–∏

–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- **PM2 –ª–æ–≥–∏**: `/opt/fleetmon/logs/`
- **Nginx –ª–æ–≥–∏**: `/var/log/nginx/`
- **PostgreSQL –ª–æ–≥–∏**: `/var/log/postgresql/`

## üÜò –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É: `sudo ./vps-cleanup.sh`
2. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É: `sudo ./vps-install.sh`

### –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PM2
sudo -u fleetmon pm2 logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
systemctl status postgresql

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
nginx -t
```

### –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
ss -tlnp | grep -E ':(80|3000|3001)'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
ufw status
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ–ª–Ω—É—é –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫—É

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ GitHub:

```bash
sudo -u fleetmon bash -c "
cd /opt/fleetmon
git pull origin main
cd backend && npm install --production
cd ../frontend && npm install && npm run build
"
sudo -u fleetmon pm2 restart all
```

---

**–ê–≤—Ç–æ—Ä**: –°–∏—Å—Ç–µ–º–∞ FleetMon
**–í–µ—Ä—Å–∏—è**: 1.0.0
**–î–∞—Ç–∞**: 2025-01-02
